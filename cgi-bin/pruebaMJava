import time
from selenium import webdriver
import os

# Abre el navegador y vaya a la primera página
driver = webdriver.Chrome()
ruta=os.path.dirname(os.path.abspath(__file__))

ruta_pagina_principal = os.path.join(ruta, '../paginaPrincipal.html')
driver.get(f"file://"+ ruta_pagina_principal)

# Introduce datos en el formulario con contraseña incorrecta
nombre_input = driver.find_element_by_id("nombre")
contrasenia_input = driver.find_element_by_id("contrasenia")
boton_ok = driver.find_element_by_xpath('//button')

nombre_input.send_keys("TuNombre")
contrasenia_input.send_keys("1234")  # Contraseña incorrecta
boton_ok.click()
time.sleep(1)

# Comprueba si hay un mensaje de error en la primera página
error_message = driver.find_element_by_id("errorContrasenia").text
assert "La contraseña no cumple con los requisitos." in error_message, "No se muestra el mensaje de error"

# Rellena el formulario con contraseña correcta y avanza a la segunda página
contrasenia_input.clear()
contrasenia_input.send_keys("TuContraseña1234")  # Contraseña correcta
boton_ok.click()
time.sleep(1)

# Avanza a la tercera página y comprueba que en la última página hay un texto de "Enhorabuena"
segunda_pagina = driver.find_element_by_tag_name("body").text
assert "Enhorabuena" in segunda_pagina, "No se muestra el mensaje 'Enhorabuena'"

# Finaliza la sesión de Selenium
driver.quit()